3d2
< ENV DEBIAN_FRONTEND=noninteractive
7,15c6,54
<     apt-get install -y acl attr autoconf bind9utils bison build-essential \
<     debhelper dnsutils docbook-xml docbook-xsl flex gdb libjansson-dev krb5-user \
<     libacl1-dev libaio-dev libarchive-dev libattr1-dev libblkid-dev libbsd-dev \
<     libcap-dev libcups2-dev libgnutls28-dev libgpgme-dev libjson-perl \
<     libldap2-dev libncurses5-dev libpam0g-dev libparse-yapp-perl \
<     libpopt-dev libreadline-dev nettle-dev perl perl-modules pkg-config \
<     python-all-dev python-crypto python2-dbg python-dev python-dnspython \
<     python3-dnspython python3-gpg python-markdown python3-markdown \
<     python3-dev xsltproc zlib1g-dev liblmdb-dev lmdb-utils wget
---
>     apt-get install -y \
>     build-essential \
>     wget \
>     python \
>     python-dev \
>     python3 \
>     python3-dev \
>     libacl1-dev \
>     libattr1-dev \
>     libblkid-dev \
>     libgnutls28-dev \
>     libreadline-dev \
>     python3-dbg \
>     python-dbg \
>     python3-gpg \
>     python3-ldb \
>     liblmdb-dev \
>     python3-tdb \
>     python3-urllib3 \
>     python3-crypto \
>     python3-gpg \
>     libldap2-dev \
>     libpopt-dev \
>     python3-pyasn1 \
>     python3-dnspython \
>     libbsd-dev \
>     python3-dev \
>     python3-setuptools \
>     python3-cryptography \
>     python3-talloc \
>     gdb \
>     git \
>     pkg-config \
>     python3-dnspython \
>     libarchive-dev \
>     dnsutils \
>     acl \
>     attr \
>     krb5-config \
>     krb5-user \
>     docbook-xml \
>     docbook-xsl \
>     xsltproc \
>     docbook5-xml \
>     docbook-xsl-ns \
>     libjson-perl \
>     xmlto \
>     rsync \
>     systemd
18,20c57,59
< RUN wget https://download.samba.org/pub/samba/samba-4.4.16.tar.gz && \
<     tar -xzvf samba-4.4.16.tar.gz && \
<     cd samba-4.4.16
---
> RUN wget https://download.samba.org/pub/samba/samba-4.5.3.tar.gz && \
>     tar -xzvf samba-4.5.3.tar.gz && \
>     cd samba-4.5.3
23c62
< RUN cd samba-4.4.16 && \
---
> RUN cd samba-4.5.3 && \
28,30d66
< ENV PATH="/usr/local/samba/bin:/usr/local/samba/sbin:${PATH}"
< COPY smb.conf /usr/local/samba/etc/smb.conf
< 
34,37c70,71
< RUN (echo test; echo test) | smbpasswd -s -a root
< 
< # Set the entry point
< ENTRYPOINT ["smbd", "--foreground", "--no-process-group"]
\ No newline at end of file
---
> # Start Samba service
> CMD ["/usr/local/samba/sbin/smbd", "--foreground", "--no-process-group"]
\ No newline at end of file
