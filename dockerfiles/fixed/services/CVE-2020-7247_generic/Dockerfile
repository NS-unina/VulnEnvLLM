# Use a Debian base image
FROM debian:buster-slim

# Install necessary packages
RUN apt-get update && \
    apt-get install -y opensmtpd

RUN sed -i 's/localhost/127.0.0.1/g' /etc/smtpd.conf # replaces all instances in a line 
RUN echo 'localhost' > /etc/mailname

# Expose SMTP port
EXPOSE 25

# Start OpenSMTPD
CMD ["smtpd", "-d"]