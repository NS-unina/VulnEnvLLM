# Use a base image with PHP and necessary build tools
FROM php:latest

# Install dependencies
RUN apt-get update && apt-get install -y \
    build-essential \
    wget \
    libglib2.0-dev \
    libcroco3-dev \
    libxml2-dev \
    libpango1.0-dev \
    libcairo2-dev

# Download librsvg source before version 2.56.3
RUN wget https://download.gnome.org/sources/librsvg/2.56/librsvg-2.56.2.tar.xz

# Extract the source code
RUN tar -xvf librsvg-2.56.2.tar.xz && cd librsvg-2.56.2

# Configure, make, and install librsvg
RUN cd librsvg-2.56.2 && \
    ./configure && \
    make && \
    make install

# Clean up unnecessary files
RUN rm -rf librsvg-2.56.2.tar.xz && \
    rm -rf librsvg-2.56.2

# Set up PHP configuration
COPY php.ini /usr/local/etc/php/php.ini

# Expose port 80
EXPOSE 80

# Start PHP server
CMD ["php", "-S", "0.0.0.0:80"]