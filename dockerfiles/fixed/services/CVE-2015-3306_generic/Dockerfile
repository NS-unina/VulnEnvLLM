# Use a base image with ProFTPD dependencies
FROM debian:bullseye

LABEL maintainer="Your Name <your.email@example.com>"

# Install required packages
RUN apt-get update && \
    apt-get install -y proftpd-basic proftpd-dev && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

ADD https://raw.githubusercontent.com/proftpd/proftpd/master/contrib/mod_copy.c /tmp/mod_copy.c
#RUN gcc -fPIC -shared -o /usr/lib/proftpd/mod_copy.so /tmp/mod_copy.c
RUN prxs -c -i -d /tmp/mod_copy.c
# Copy ProFTPD configuration file with mod_copy module enabled
COPY proftpd.conf /etc/proftpd/

# Expose ports (you may want to adjust these based on your ProFTPD configuration)
EXPOSE 20 21

# Start ProFTPD in foreground
CMD ["proftpd", "--nodaemon"]