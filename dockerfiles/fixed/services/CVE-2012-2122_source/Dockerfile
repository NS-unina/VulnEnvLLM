# Use a base image with necessary build tools
FROM ubuntu:20.04

# Install dependencies
RUN apt-get update && apt-get install -y \
    build-essential \
    cmake \
    bison \
    git \
    libncurses5-dev \
    libssl-dev \
    zlib1g-dev \
    && rm -rf /var/lib/apt/lists/*

# Clone MySQL source from GitHub
RUN git clone --depth=1 --branch mysql-5.6.5 https://github.com/mysql/mysql-server.git /mysql

# Build MySQL Server
WORKDIR /mysql
RUN cmake . && make && make install

# Cleanup
RUN rm -rf /mysql

# Expose MySQL port
EXPOSE 3306

# Set default command to run MySQL Server
CMD ["mysqld"]