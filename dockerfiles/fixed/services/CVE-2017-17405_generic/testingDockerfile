# Use an official Ruby runtime as the base image
FROM ruby:2.4.1
RUN echo "deb http://archive.debian.org/debian/ stretch main contrib non-free" > /etc/apt/sources.list && \
    echo "deb http://archive.debian.org/debian/ stretch-proposed-updates main contrib non-free" >> /etc/apt/sources.list && \
    echo "deb http://archive.debian.org/debian-security stretch/updates main contrib non-free" >> /etc/apt/sources.list

RUN apt-get --allow-unauthenticated update && \
    apt-get install -y --allow-unauthenticated net-tools
# Set the working directory in the container
WORKDIR /app

# Copy the Gemfile and Gemfile.lock from your project directory into the container
# COPY Gemfile Gemfile.lock ./

# Install dependencies
# RUN bundle install

# Copy the current directory contents into the container at /app
# COPY . /app

# Define environment variables for the application
#ENV RAILS_ENV=production
COPY ftpserver.rb /app/ftpserver.rb
COPY ftpclient.rb /app/ftpclient.rb
# Expose port 3000 to the outside world
EXPOSE 2121 23461 23421

# Command to run the application
#CMD ["ruby", "ftpserver.rb"]
CMD ["tail", "-f", "/dev/null"]
