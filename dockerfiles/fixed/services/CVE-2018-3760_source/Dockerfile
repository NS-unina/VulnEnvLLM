# Use a Ruby base image
FROM ruby:2.7

# Install necessary dependencies
RUN apt-get update && \
    apt-get install -y \
    build-essential \
    nodejs \ 
    wget

# Clone Sprockets from GitHub
RUN wget https://github.com/rails/sprockets/archive/refs/tags/v3.7.0.zip && \
    unzip v3.7.0.zip && \
    mv sprockets-3.7.0 sprockets

# Set working directory
WORKDIR /sprockets

# Install Sprockets
RUN bundle install

# Expose any ports the app is expecting
EXPOSE 3000

# Command to run the application
CMD ["bundle", "exec", "rackup", "--host", "0.0.0.0", "--port", "3000"]