# Use Ubuntu 18.04 as the base image
FROM ubuntu:18.04

# Update package lists and install Samba 4.4.14
RUN apt-get update && \
    apt-get install -y samba=2:4.4.14+dfsg-0ubuntu2

# Copy the Samba configuration file into the container
COPY smb.conf /etc/samba/smb.conf

# Expose the necessary ports for Samba
EXPOSE 137/udp 138/udp 139/tcp 445/tcp

# Start Samba service when the container launches
CMD ["/usr/sbin/smbd", "--foreground", "--no-process-group"]