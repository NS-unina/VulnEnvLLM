# Use a suitable base image
FROM openjdk:11-jdk

# Set environment variables
ENV OFBIZ_HOME /ofbiz

# Set working directory
WORKDIR $OFBIZ_HOME

# Expose ports
EXPOSE 8080

# Install necessary tools
RUN apt-get update && \
    apt-get install -y wget && \
    apt-get clean

# Download and extract Apache OFBiz
RUN wget -O ofbiz.tar.gz https://archive.apache.org/dist/ofbiz/apache-ofbiz-10.04.06.zip && \
    mkdir -p $OFBIZ_HOME && \
    tar -xzf ofbiz.tar.gz -C $OFBIZ_HOME --strip-components=1 && \
    rm ofbiz.tar.gz

# Change directory to OFBiz
WORKDIR $OFBIZ_HOME

# Set the default command to start OFBiz
CMD ["./gradlew", "ofbiz"]