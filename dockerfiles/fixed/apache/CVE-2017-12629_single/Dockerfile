# Use a base image compatible with native images, such as GraalVM
FROM <native_image_base_image>

# Set environment variables
ENV SOLR_VERSION 7.0.1
ENV SOLR solr-$SOLR_VERSION

# Download and extract Apache Solr
RUN wget https://archive.apache.org/dist/lucene/solr/$SOLR_VERSION/$SOLR.tgz && \
    tar -xzf $SOLR.tgz && \
    rm $SOLR.tgz && \
    mv $SOLR /opt/solr

# Set Solr home
ENV SOLR_HOME /opt/solr/server/solr

# Set working directory
WORKDIR /opt/solr

# Expose Solr port
EXPOSE 8983

# Start Solr
CMD ["/opt/solr/bin/solr", "start", "-f"]