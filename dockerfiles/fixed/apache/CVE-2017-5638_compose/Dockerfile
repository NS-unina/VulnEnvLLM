# Use a base image
FROM tomcat:8.5-jre8

# Set environment variables
ENV STRUTS_VERSION 2.5
ENV STRUTS_HOME /usr/local/tomcat/webapps/ROOT

# Update package lists and install necessary packages
RUN apt-get update && apt-get install -y wget unzip && \
    rm -rf /var/lib/apt/lists/*

# Download and extract Struts 2.5
RUN wget https://archive.apache.org/dist/struts/$STRUTS_VERSION/struts-2.5-all.zip && \
    unzip struts-2.5-all.zip -d /tmp && \
    cp -Rv "/tmp/struts-2.5"* $STRUTS_HOME && \
    rm -rf /tmp/struts-2.5*

# Expose default port
EXPOSE 8080

# Start Tomcat
CMD ["catalina.sh", "run"]