# Use an official WordPress image
FROM wordpress:latest

# Set the AN_Gradebook plugin version
ENV AN_GRADEBOOK_VERSION 5.0.1

# Download and install AN_Gradebook plugin
RUN curl -o /usr/src/wordpress/wp-content/plugins/an_gradebook.zip -SL https://downloads.wordpress.org/plugin/an_gradebook.${AN_GRADEBOOK_VERSION}.zip \
    && unzip -q /usr/src/wordpress/wp-content/plugins/an_gradebook.zip -d /usr/src/wordpress/wp-content/plugins/ \
    && rm /usr/src/wordpress/wp-content/plugins/an_gradebook.zip

# Use an official MySQL image with a specific version
FROM mysql:5.7

# Set up MySQL environment variables
ENV MYSQL_ROOT_PASSWORD=wordpress
ENV MYSQL_DATABASE=wordpress
ENV MYSQL_USER=wordpress
ENV MYSQL_PASSWORD=wordpress

EXPOSE 80