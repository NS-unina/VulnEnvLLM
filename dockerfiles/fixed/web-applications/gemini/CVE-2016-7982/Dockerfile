FROM ubuntu:20.04
# Install dependencies
RUN apt-get update && apt-get install -y curl gdemu gnuplot imagemagick libav-tools libdvd-pkg libsdl2-dev libx11-dev pulseaudio qt5-default wine-stable

# Download and install SPIP 3.1.1
RUN wget -O SPIP3.1.1.zip https://www.spip.com/download/spip_3.1.1.zip && unzip SPIP3.1.1.zip && cd SPIP3.1.1 && ./install.sh

# Set working directory
WORKDIR /opt/spip3.1.1

# Expose ports
EXPOSE 8080

# Run the SPIP 3.1.1 server
CMD ["SPIPServer", "--port", "8080"]