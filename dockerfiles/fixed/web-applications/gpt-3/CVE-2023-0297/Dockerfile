# Use an official Python image as base
FROM python:3.9-slim

# Set environment variables
ENV PYLOAD_VERSION 0.5.0

# Install dependencies
RUN apt-get update && apt-get install -y wget unzip

# Download and install PyLoad
WORKDIR /opt
RUN wget https://github.com/pyload/pyload/archive/${PYLOAD_VERSION}.zip && unzip ${PYLOAD_VERSION}.zip && mv pyload-${PYLOAD_VERSION} pyload && rm ${PYLOAD_VERSION}.zip

# Install Python dependencies
WORKDIR /opt/pyload
RUN pip install -r requirements.txt

# Expose ports
EXPOSE 8000

# Start PyLoad
CMD ["python", "pyLoadCore.py", "--configdir=/config"]