FROM ubuntu:latest

# Install Nostromo dependencies
RUN apt-get update && apt-get install -y libjpeg-dev libpng-dev libpq-dev libzip-dev mysql-client sqlite3

# Download Nostromo 1.9.6
RUN wget http://www.nazgul.ch/dev/nostromo-1.9.6.tar.gz

# Extract Nostromo 1.9.6
RUN tar -xzvf nostromo-1.9.6.tar.gz

# Install Nostromo 1.9.6
RUN cd nostromo-1.9.6 && ./configure && make && make install

# Configure Nostromo 1.9.6
COPY ./nostromo.conf /etc/nostromo/nostromo.conf

# Expose Nostromo 1.9.6 port
EXPOSE 80

# Start Nostromo 1.9.6
CMD ["/usr/local/sbin/nostromo"]