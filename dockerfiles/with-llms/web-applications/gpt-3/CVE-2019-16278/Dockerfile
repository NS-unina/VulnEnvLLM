# Use an official Ubuntu base image
FROM ubuntu:18.04

# Install necessary dependencies
RUN apt-get update && apt-get install -y build-essential && rm -rf /var/lib/apt/lists/*

# Download and compile nostromo 1.9.6
WORKDIR /tmp
RUN apt-get update && apt-get install -y wget && wget http://www.nazgul.ch/dev/nostromo-1.9.6.tar.gz && tar -zxvf nostromo-1.9.6.tar.gz && rm nostromo-1.9.6.tar.gz && cd nostromo-1.9.6 && make && make install

# Expose the default port used by nostromo (8080)
EXPOSE 8080

# Run nostromo as a foreground process
CMD ["nhttpd", "-D", "-p", "8080", "-H", "/var/nostromo"]