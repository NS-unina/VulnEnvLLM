# Use an official Ubuntu runtime as a parent image
FROM ubuntu:16.04

# Set the maintainer
LABEL maintainer="your-email@example.com"

# Install necessary packages
RUN apt-get update && apt-get install -y \
    build-essential \
    pkg-config \
    erlang \
    libicu-dev \
    libmozjs185-dev \
    libcurl4-openssl-dev

# Download and install CouchDB
RUN apt-get install -y wget && \
    wget http://apache.mirrors.pair.com/couchdb/source/2.0.0/apache-couchdb-2.0.0.tar.gz && \
    tar xvf apache-couchdb-2.0.0.tar.gz && \
    cd apache-couchdb-2.0.0 && \
    ./configure && \
    make release

# Expose the CouchDB HTTP port
EXPOSE 5984

# Start CouchDB
CMD ["./apache-couchdb-2.0.0/rel/couchdb/bin/couchdb"]