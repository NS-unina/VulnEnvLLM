# Use the official OpenJDK 8 image as base
FROM openjdk:8-jdk

# Set environment variables
ENV OFBIZ_HOME=/ofbiz \
    PATH=$PATH:/ofbiz/bin

# Create directory for OFBiz
RUN mkdir /ofbiz

# Download Apache OFBiz 10.04.04 and extract it
ADD http://archive.apache.org/dist/ofbiz/apache-ofbiz-10.04.04.tar.gz /ofbiz
RUN tar -xzf /ofbiz/apache-ofbiz-10.04.04.tar.gz -C /ofbiz --strip-components=1 && \
    rm /ofbiz/apache-ofbiz-10.04.04.tar.gz

# Expose ports
EXPOSE 8080 8443

# Set the working directory
WORKDIR /ofbiz

# Start Apache OFBiz
CMD ["./gradlew", "ofbiz"]