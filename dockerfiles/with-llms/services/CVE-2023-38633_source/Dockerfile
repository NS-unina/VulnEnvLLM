# Use a base image with necessary development tools and libraries
FROM ubuntu:latest

# Install necessary packages for building librsvg and running the C program
RUN apt-get update && \
    apt-get install -y \
    build-essential \
    pkg-config \
    libglib2.0-dev \
    libcairo2-dev \
    libxml2-dev \
    git \
    wget \
    && rm -rf /var/lib/apt/lists/*

# Clone librsvg from source
RUN git clone --branch v2.56.2 --depth 1 https://gitlab.gnome.org/GNOME/librsvg.git /librsvg

# Build and install librsvg
RUN cd /librsvg && \
    ./autogen.sh && \
    make && \
    make install

# Create a directory for your C program
RUN mkdir /app
WORKDIR /app

# Copy your C source code into the container
COPY main.c /app/

# Compile the C program
RUN gcc -o program main.c $(pkg-config --cflags --libs librsvg-2.0)

# Set the entry point to your program
ENTRYPOINT ["./program"]
