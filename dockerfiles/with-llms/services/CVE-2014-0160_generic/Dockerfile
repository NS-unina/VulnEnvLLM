# Use a base image with your preferred Linux distribution
FROM ubuntu:18.04

# Update package lists
RUN apt-get update

# Install essential build tools
RUN apt-get install -y build-essential

# Set the OpenSSL version
ENV OPENSSL_VERSION 1.0.1f

# Download OpenSSL source
ADD https://www.openssl.org/source/old/1.0.1/openssl-$OPENSSL_VERSION.tar.gz /tmp/

# Extract the source
RUN tar -xzvf /tmp/openssl-$OPENSSL_VERSION.tar.gz -C /tmp/

# Change directory to the OpenSSL source
WORKDIR /tmp/openssl-$OPENSSL_VERSION

# Configure, build, and install OpenSSL
RUN ./config && \
    make && \
    make install

# Cleanup
RUN rm -rf /tmp/*

# Optionally, you can set the path to include OpenSSL binaries
ENV PATH="/usr/local/ssl/bin:${PATH}"

# Set the working directory
WORKDIR /app

# Example CMD to run something, replace with your command
CMD ["bash"]