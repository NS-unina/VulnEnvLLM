# Use a Ruby base image
FROM ruby:2.7

# Install necessary dependencies
RUN apt-get update && \
    apt-get install -y \
    build-essential \
    git \
    nodejs

# Clone Sprockets from GitHub
RUN git clone --branch v3.7.1 --depth 1 https://github.com/rails/sprockets.git /sprockets

# Set working directory
WORKDIR /sprockets

# Install Sprockets
RUN bundle install

# Expose any ports the app is expecting
EXPOSE 3000

# Command to run the application
CMD ["bundle", "exec", "rackup", "--host", "0.0.0.0", "--port", "3000"]