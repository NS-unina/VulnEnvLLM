# Use a base image with PHP and Apache
FROM php:7.4-apache

# Update package lists
RUN apt-get update

# Install necessary packages
RUN apt-get install -y \
    librsvg2-bin \
    librsvg2-dev \
    pkg-config \
    libcairo2-dev \
    libgdk-pixbuf2.0-dev \
    libxml2-dev \
    libpango1.0-dev \
    libjpeg-dev \
    libpng-dev \
    libgif-dev \
    libtiff-dev \
    libexif-dev \
    libwebp-dev

# Enable required Apache modules
RUN a2enmod rewrite

# Restart Apache to apply changes
RUN service apache2 restart

# Set up the working directory
WORKDIR /var/www/html

# Copy your PHP files into the container
COPY . /var/www/html

# Expose port 80
EXPOSE 80

# Start Apache server
CMD ["apache2-foreground"]