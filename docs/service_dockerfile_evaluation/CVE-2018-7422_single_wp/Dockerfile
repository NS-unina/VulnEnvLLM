# Use the official WordPress image
FROM wordpress:latest

# Set environment variables for MySQL
ENV MYSQL_ROOT_PASSWORD=root
ENV MYSQL_DATABASE=wordpress
ENV MYSQL_USER=wordpress
ENV MYSQL_PASSWORD=wordpress

# Install MySQL server
RUN docker-php-ext-install mysqli && docker-php-ext-enable mysqli

# Download and install the Site Editor plugin version 1.1.1
RUN curl -o /usr/src/wordpress/wp-content/plugins/site-editor.zip -SL https://downloads.wordpress.org/plugin/site-editor.1.1.1.zip \
    && unzip -q /usr/src/wordpress/wp-content/plugins/site-editor.zip -d /usr/src/wordpress/wp-content/plugins/ \
    && rm /usr/src/wordpress/wp-content/plugins/site-editor.zip

# Expose ports
EXPOSE 80

# Start the WordPress installation
CMD ["apache2-foreground"]
