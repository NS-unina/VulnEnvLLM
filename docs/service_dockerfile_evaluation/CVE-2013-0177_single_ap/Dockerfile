# Use a base image with Java and Ant pre-installed
FROM openjdk:8-jdk

# Define environment variables
ENV OFBIZ_HOME /ofbiz

# Set up working directory
WORKDIR $OFBIZ_HOME

# Install necessary tools
RUN apt update -y && apt install -y curl zip

# Download and extract OFBiz
RUN curl -fSL "https://archive.apache.org/dist/ofbiz/apache-ofbiz-10.04.04.zip" -o ofbiz.zip && \
    unzip ofbiz.zip && \
    rm ofbiz.zip && \
    mv apache-ofbiz-10.04.04/* . && \
    rm -rf apache-ofbiz-10.04.04

# Expose ports
EXPOSE 8080

# Start OFBiz
RUN ./ant run-install 
CMD ["java","-Xms128M","-Xmx512M","-jar","ofbiz.jar"]