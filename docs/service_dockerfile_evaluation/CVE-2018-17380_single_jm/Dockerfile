# Use official Joomla image as base
FROM joomla:<your-joomla-version>

# Install wget and unzip
RUN apt-get update && \
    apt-get install -y wget unzip && \
    rm -rf /var/lib/apt/lists/*

# Download Article Factory Manager plugin
RUN wget https://downloads.joomla.org/extensions/news-production/article-factory-manager/4-3-9/com_articlefactorymanager-4.3.9.zip

# Unzip Article Factory Manager plugin
RUN unzip com_articlefactorymanager-4.3.9.zip -d /usr/src/joomla/plugins

# Remove zip file
RUN rm com_articlefactorymanager-4.3.9.zip

# Set permissions
RUN chown -R www-data:www-data /usr/src/joomla/plugins/articlefactorymanager

# Expose port
EXPOSE 80

# Start Apache and MySQL
CMD ["apache2-foreground"]
