# Use the official WordPress image as base
FROM wordpress:latest

# Set environment variables for MySQL
ENV MYSQL_ROOT_PASSWORD=wordpress
ENV MYSQL_DATABASE=wordpress
ENV MYSQL_USER=wordpress
ENV MYSQL_PASSWORD=wordpress

# Install unzip utility
RUN apt-get update && apt-get install -y unzip

# Download and install HDW Player plugin
RUN curl -o /tmp/hdw-player.zip -SL https://downloads.wordpress.org/plugin/hdw-player-video-player-video-gallery.2.4.2.zip && \
    unzip /tmp/hdw-player.zip -d /usr/src/wordpress/wp-content/plugins/ && \
    rm /tmp/hdw-player.zip

# Copy custom configuration files
#COPY ./wp-config.php /var/www/html/wp-config.php

# Expose ports
EXPOSE 80

# Start MySQL server in the background
CMD ["sh", "-c", "/usr/local/bin/docker-entrypoint.sh mysqld & docker-entrypoint.sh apache2-foreground"]
